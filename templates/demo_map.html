<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maritime Navigation Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Times New Roman', Times, serif; 
            background: linear-gradient(135deg, #0a1931 0%, #1a3a5f 100%);
            min-height: 100vh;
            color: #e6f2ff;
            overflow: hidden;
        }
        
        .container { 
            width: 100vw;
            height: 100vh;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        
        .header { 
            background: rgba(13, 36, 66, 0.9);
            padding: 15px 30px;
            border-bottom: 2px solid #3a7bd5;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .header h1 { 
            color: #ffffff; 
            margin-bottom: 8px; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 2px; 
            font-size: 1.8em;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .header p { 
            color: #b3d9ff; 
            max-width: 800px; 
            font-weight: normal; 
            font-size: 1em;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .content { 
            display: flex; 
            flex: 1;
            overflow: hidden;
        }
        
        #map { 
            flex: 1; 
            border-right: 2px solid #3a7bd5;
        }
        
        .legend-sidebar { 
            background: rgba(13, 36, 66, 0.9);
            width: 400px;
            padding: 25px;
            border-left: 2px solid #3a7bd5;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .explanation-box { 
            background: rgba(26, 58, 95, 0.9);
            color: #ffffff; 
            padding: 20px; 
            border: 1px solid #3a7bd5;
            margin-bottom: 20px; 
            display: none;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .explanation-box.active { 
            display: block; 
            animation: fadeIn 0.3s ease; 
        }
        
        .feature-item { 
            background: rgba(26, 58, 95, 0.7);
            padding: 15px; 
            margin-bottom: 12px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            border: 1px solid #3a7bd5;
            border-radius: 4px;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .feature-item:hover { 
            background: rgba(58, 123, 213, 0.3); 
            transform: translateX(3px); 
            border-color: #5dade2;
        }
        
        .feature-item.active { 
            background: rgba(58, 123, 213, 0.4); 
            border-color: #5dade2;
        }
        
        .feature-item i { 
            margin-right: 10px; 
            font-size: 1.1em; 
            width: 24px; 
        }
        
        .feature-item.disaster i { color: #ff6b6b; }
        .feature-item.route i { color: #5dade2; }
        .feature-item.eca i { color: #f4d03f; }
        .feature-item.collision i { color: #ff6b6b; }
        .feature-item.ship i { color: #5dade2; }
        .feature-item.cpa i { color: #ff6b6b; }
        
        .feature-title { 
            font-weight: 900; 
            color: #ffffff; 
            margin-bottom: 5px; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            font-family: 'Times New Roman', Times, serif;
        }
        
        .feature-desc { 
            font-size: 0.95em; 
            color: #b3d9ff; 
            font-weight: 700;
            font-family: 'Times New Roman', Times, serif;
        }
        
        h2 { 
            color: #ffffff; 
            margin-bottom: 20px; 
            padding-bottom: 10px; 
            border-bottom: 2px solid #3a7bd5; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
            font-family: 'Times New Roman', Times, serif;
        }
        
        .explanation-title { 
            font-size: 1.3em; 
            margin-bottom: 20px; 
            color: #5dade2; 
            font-weight: 900; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            font-family: 'Times New Roman', Times, serif;
        }
        
        .explanation-content { 
            line-height: 1.7; 
            font-weight: 700;
            margin-bottom: 15px; 
            color: #e6f2ff; 
            font-weight: normal;
            text-shadow: 0 1px 1px rgba(255,255,255,0.1);
            font-family: 'Times New Roman', Times, serif;
        }
        
        .explanation-content strong { color: #5dade2; }
        
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .popup-content { 
            font-family: 'Times New Roman', Times, serif; 
            min-width: 250px; 
            max-width: 300px; 
        }
        
        .popup-title { 
            background: #1a3a5f; 
            color: #ffffff; 
            padding: 10px; 
            margin: -10px -10px 8px -10px; 
            font-weight: 700; 
            text-align: center; 
            border-bottom: 2px solid #3a7bd5; 
            text-transform: uppercase; 
            font-family: 'Times New Roman', Times, serif;
        }
        
        .popup-body { 
            padding: 5px 0; 
            font-weight: normal;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .popup-click { 
            margin-top: 10px; 
            padding-top: 10px; 
            border-top: 1px solid #2d4a6e; 
            font-size: 0.85em; 
            color: #b3d9ff; 
            text-align: center; 
            font-weight: normal;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .disaster-icon { 
            background: #ff6b6b; 
            border: 2px solid white; 
            border-radius: 50%; 
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.7); 
            text-align: center; 
        }
        
        .ship-marker { text-align: center; }
        
        .quick-tip {
            margin-top: auto;
            padding: 15px; 
            background: rgba(26, 58, 95, 0.7);
            border: 1px solid #3a7bd5;
            border-radius: 4px;
        }
        
        .quick-tip-title {
            font-weight: 700; 
            color: #ffffff; 
            margin-bottom: 8px; 
            text-transform: uppercase;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .quick-tip-content {
            font-size: 0.9em; 
            color: #b3d9ff; 
            font-weight: normal;
            font-family: 'Times New Roman', Times, serif;
        }
        
        /* Scrollbar styling */
        .legend-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        
        .legend-sidebar::-webkit-scrollbar-track {
            background: rgba(13, 36, 66, 0.5);
        }
        
        .legend-sidebar::-webkit-scrollbar-thumb {
            background: #3a7bd5;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1><i class="fas fa-map-marked-alt"></i> Project Starboard Demo</h1>
                <h4>Interactive demo showing key application concepts. Click on map elements or sidebar items to learn more. (Not a real scenario)</h4>
            </div>
        </div>
        
        <div class="content">
            <div id="map"></div>
            
            <div class="legend-sidebar">
                <h2><i class="fas fa-info-circle"></i> APPLICATION FEATURES</h2>
                
                <div class="explanation-box" id="explanation-box">
                    <div class="explanation-title" id="explanation-title">SELECT A FEATURE</div>
                    <div class="explanation-content" id="explanation-content">
                        Click on any feature in the sidebar or on the map to see detailed explanations here.
                    </div>
                
                <div class="feature-item route active" onclick="showExplanation('route')">
                    <div class="feature-title"><i class="fas fa-route"></i> SEA ROUTE</div>
                    <div class="feature-desc">Mundra, India to Savannah, USA</div>
                </div>
                
                <div class="feature-item disaster" onclick="showExplanation('disaster')">
                    <div class="feature-title"><i class="fas fa-exclamation-triangle"></i> DISASTER AREAS (2)</div>
                    <div class="feature-desc">Arabian Sea & North Atlantic disasters</div>
                </div>
                
                <div class="feature-item eca" onclick="showExplanation('eca')">
                    <div class="feature-title"><i class="fas fa-leaf"></i> EMISSION CONTROL AREA</div>
                    <div class="feature-desc">SOx & NOx emission regulations</div>
                </div>
                
                <div class="feature-item collision" onclick="showExplanation('collision')">
                    <div class="feature-title"><i class="fas fa-exclamation-circle"></i> COLLISION RISK</div>
                    <div class="feature-desc">Critical vessel encounter detected</div>
                </div>
                
                <div class="feature-item ship" onclick="showExplanation('ship')">
                    <div class="feature-title"><i class="fas fa-ship"></i> AIS VESSEL TRACKING</div>
                    <div class="feature-desc">Real-time ship positions and data</div>
                </div>
                
                <div class="quick-tip">
                    <div class="quick-tip-title">
                        <i class="fas fa-lightbulb"></i> QUICK TIP
                    </div>
                    <div class="quick-tip-content">
                        Click on map elements for feature info.<br>
                        Click on cards detailed explanations.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map
        const map = L.map('map', { 
            center: [30, -30], 
            zoom: 3, 
            minZoom: 2, 
            maxZoom: 10,
            attributionControl: false
        });
        
        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { 
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        
        // Define route coordinates
        const routeCoordinates = [
            [22.785951970472524, 69.67485924730101],
            [22.0, 68.5], [21.0, 67.5], [20.5, 67.0], [20.0, 66.5],
            [25.0, 60.0], [28.0, 50.0], [32.0, 35.0], [35.0, 10.0],
            [36.0, -15.0], [35.5, -35.0], [35.0, -40.0], [34.5, -45.0],
            [33.5, -60.0], [32.5, -75.0], [32.12220075088899, -81.13971461642345]
        ];
        
        // Add route polyline
        const route = L.polyline(routeCoordinates, { 
            color: '#5dade2', 
            weight: 5, 
            opacity: 1 
        }).addTo(map);
        
        route.bindPopup(createPopup(
            'SEA ROUTE NAVIGATION', 
            '<strong>Distance:</strong> ~8,200 nautical miles<br><strong>Transit:</strong> 18-22 days<br><strong>WARNING:</strong> PASSES THROUGH DISASTER ZONES'
        ));
        
            // Add disaster area 1
        const disaster1Box = L.rectangle([
            [18.0, 64.0],  // [southwest lat, southwest lon]
            [23.0, 70.0]   // [northeast lat, northeast lon]
        ], { 
            color: '#ff6b6b', 
            fillColor: '#ff6b6b', 
            fillOpacity: 0.2, 
            weight: 2 
        }).addTo(map);

        const disaster1 = L.marker([20.5, 67.0], {
            icon: L.divIcon({ 
                className: 'disaster-icon', 
                html: '<i class="fas fa-exclamation-triangle" style="color: white; font-size: 14px; line-height: 26px;"></i>', 
                iconSize: [28, 28], 
                iconAnchor: [14, 14] 
            })
        }).addTo(map);

        disaster1.bindPopup(createPopup(
            'ARABIAN SEA CYCLONE', 
            '<strong>Alert:</strong> RED<br><strong>Wind:</strong> 120 km/h<br><strong>Radius:</strong> 200 km<br>Active cyclone - reroute advised'
        ));

        disaster1Box.bindPopup(createPopup(
            'ARABIAN SEA CYCLONE', 
            '<strong>Alert:</strong> RED<br><strong>Wind:</strong> 120 km/h<br><strong>Radius:</strong> 200 km<br>Active cyclone - reroute advised'
        ));

        // Add disaster area 2
        const disaster2Box = L.rectangle([
            [33.0, -43.0],  // [southwest lat, southwest lon]
            [37.0, -37.0]   // [northeast lat, northeast lon]
        ], { 
            color: '#ffa726', 
            fillColor: '#ffa726', 
            fillOpacity: 0.2, 
            weight: 2 
        }).addTo(map);

        const disaster2 = L.marker([35.0, -40.0], {
            icon: L.divIcon({ 
                className: 'disaster-icon', 
                html: '<i class="fas fa-exclamation-triangle" style="color: white; font-size: 14px; line-height: 26px;"></i>', 
                iconSize: [28, 28], 
                iconAnchor: [14, 14] 
            })
        }).addTo(map);

        disaster2.bindPopup(createPopup(
            'NORTH ATLANTIC STORM', 
            '<strong>Alert:</strong> ORANGE<br><strong>Waves:</strong> 8-10 meters<br><strong>Duration:</strong> 48-72 hours<br>Severe conditions'
        ));

        disaster2Box.bindPopup(createPopup(
            'NORTH ATLANTIC STORM', 
            '<strong>Alert:</strong> ORANGE<br><strong>Waves:</strong> 8-10 meters<br><strong>Duration:</strong> 48-72 hours<br>Severe conditions'
        ));
        
        // Add Emission Control Area
        const ecaArea = L.polygon([
            [40.0, -55.0], [38.0, -50.0], [35.0, -48.0], 
            [33.0, -52.0], [36.0, -58.0]
        ], { 
            color: '#f4d03f', 
            weight: 2, 
            fillColor: '#f4d03f', 
            fillOpacity: 0.15, 
            dashArray: '5, 5' 
        }).addTo(map);
        
        ecaArea.bindPopup(createPopup(
            'EMISSION CONTROL AREA', 
            '<strong>Type:</strong> SECA<br><strong>Sulfur Limit:</strong> 0.10%<br><strong>Enforcement:</strong> IMO Regulation 14<br>Low-sulfur fuel required'
        ));
        
        // Add ship markers
        const ships = [
            {lat: 38.5, lon: -52.5, name: 'MSC GINA', type: 'Container', speed: '18.5 knots'},
            {lat: 37.0, lon: -53.0, name: 'EVER GIVEN', type: 'Container', speed: '16.2 knots'},
            {lat: 36.0, lon: -51.0, name: 'SEA CROWN', type: 'Tanker', speed: '12.8 knots'},
            {lat: 35.5, lon: -54.0, name: 'ATLANTIC VOYAGER', type: 'Bulk Carrier', speed: '14.3 knots'}
        ];
        
        ships.forEach(ship => {
            const shipMarker = L.marker([ship.lat, ship.lon], {
                icon: L.divIcon({ 
                    className: 'ship-marker', 
                    html: `<i class="fas fa-ship" style="color: #5dade2; font-size: 18px;"></i>`, 
                    iconSize: [20, 20], 
                    iconAnchor: [10, 10] 
                })
            }).addTo(map);
            
            shipMarker.bindPopup(createPopup(
                `VESSEL: ${ship.name}`, 
                `<strong>Type:</strong> ${ship.type}<br><strong>Speed:</strong> ${ship.speed}<br><strong>Status:</strong> In ECA - low-sulfur fuel`
            ));
        });
        
        // Add collision risk line
        const collisionLine = L.polyline([[38.5, -52.5], [36.0, -51.0]], { 
            color: '#ff6b6b', 
            weight: 3, 
            opacity: 0.8, 
            dashArray: '8, 4' 
        }).addTo(map);
        
        collisionLine.bindPopup(createPopup(
            'CRITICAL COLLISION RISK', 
            '<strong>Vessels:</strong> MSC GINA / SEA CROWN<br><strong>CPA:</strong> 0.8 NM<br><strong>TCPA:</strong> 12 minutes<br>IMMEDIATE ACTION REQUIRED'
        ));
        
        // Add warning marker
        const warningMarker = L.marker([37.25, -51.75], {
            icon: L.divIcon({ 
                className: 'disaster-icon', 
                html: '<i class="fas fa-exclamation-circle" style="color: white; font-size: 14px; line-height: 26px;"></i>', 
                iconSize: [28, 28], 
                iconAnchor: [14, 14] 
            })
        }).addTo(map);
        
        warningMarker.bindPopup(createPopup(
            'CPA/TCPA ALARM', 
            '<strong>⚠️ WARNING ⚠️</strong><br>MSC GINA / SEA CROWN collision risk<br><strong>CPA:</strong> 0.8 NM<br><strong>TCPA:</strong> 12 min<br>Course alteration required'
        ));
        
        // Fit map to show all elements
        map.fitBounds([[15, 60], [45, -90]]);
        
        // Popup creation function
        function createPopup(title, content) {
            return `<div class="popup-content">
                <div class="popup-title">${title}</div>
                <div class="popup-body">${content}</div>
                <div class="popup-click">
            </div>`;
        }
        
        // Explanation data
const explanations = {
    'route': {
        title: 'SEA ROUTE PLANNING',
        content: '<strong>• Interactive port selection</strong> with water body, country and port dropdown hierarchy<br><strong>• Automatic route calculation</strong> using real port database with harbor specifications<br><strong>• Distance measurement</strong> in nautical miles and kilometers with accurate metrics<br><strong>• Visual route display</strong> on interactive map with clear path visualization<br><strong>• Multi-layer integration</strong> with disaster, ECA, and piracy data along the route<br><strong>• Real-time port congestion insights</strong> to help avoid delays',
        links: []
    },
    'disaster': {
        title: 'REAL-TIME DISASTER MONITORING',
        content: '<strong>• Live disaster monitoring</strong> and critical events along the route<br><strong>• Current events filtering</strong> showing only active disasters with valid impact data<br><strong>• Alert level classification</strong> with color-coded Red/Orange/Green severity indicators<br><strong>• Bounding box visualization</strong> of disaster impact areas with adjustable overlays<br><strong>• Ship detection</strong> for identifying vessels within disaster-affected zones<br><strong>• Route impact analysis</strong> by checking intersection with disaster zones',
        links: []
    },
    'eca': {
        title: 'EMISSION CONTROL AREAS',
        content: '<strong>• Automatic ECA/MPA detection</strong> along planned sea routes<br><strong>• Fast intersection analysis</strong> with regulated environmental zones<br><strong>• Color-coded overlays</strong> (Yellow for ECAs, Orange for MPAs)<br><strong>• GeoJSON boundary visualization</strong> with specific area information<br><strong>• Ship monitoring</strong> within emission controlled and protected areas<br><strong>• ECA requires low-sulfur fuel</strong> - 0.10% sulfur limit<br><strong>• Non-compliance penalties</strong> including heavy fines and vessel detention',
        links: []
    },
    'collision': {
        title: 'COLLISION RISK DETECTION',
        content: '<strong>CPA (Closest Point of Approach)</strong> is the shortest distance between two ships if they continue on their current tracks, and <strong>TCPA (Time to Closest Point of Approach)</strong> is the time remaining until that closest point.<br>\
        <strong>• CPA/TCPA calculation</strong> for vessel pairs in disaster areas<br>\
        <strong>• Risk level classification</strong> (CRITICAL for CPA < 0.5 NM)<br>\
        <strong>• Visual alert system</strong> with red dashed lines between high-risk vessels<br>\
        <strong>• Interactive risk details</strong> showing vessel data and collision parameters<br>\
        <strong>• Real-time monitoring</strong> of vessel movements and trajectories<br>\
        <strong>• Enables timely collision avoidance</strong> by giving early warnings',
        links: []
    },
    'ship': {
        title: 'VESSEL TRACKING SYSTEM',
        content: '<strong>• Live AIS data integration</strong> for vessel tracking<br><strong>• Vessel type filtering</strong> for cargo ships and tankers<br><strong>• Detailed ship information</strong> including MMSI, dimensions, and navigation data<br><strong>• Multiple tracking contexts</strong> for disaster areas, ports, and ocean regions<br><strong>• On-demand weather loading</strong> for individual vessel positions<br><strong>• Region-based vessel display</strong> using predefined ocean regions<br><strong>• Improves situational awareness</strong> for maritime traffic monitoring',
        links: []
    }
};
        
        // Show explanation function
        function showExplanation(type) {
            const exp = explanations[type];
            document.getElementById('explanation-title').innerHTML = `<i class="fas fa-${getIcon(type)}"></i> ${exp.title}`;
            document.getElementById('explanation-content').innerHTML = exp.content;
            
            let linksHtml = '<strong><i class="fas fa-external-link-alt"></i> LEARN MORE:</strong> ';
            exp.links.forEach((link, i) => {
                linksHtml += `<a href="${link.url}" target="_blank">${link.text}</a>`;
                if (i < exp.links.length - 1) linksHtml += ' | ';
            });
            
            document.getElementById('explanation-box').classList.add('active');
            
            // Update active item in sidebar
            document.querySelectorAll('.feature-item').forEach(item => item.classList.remove('active'));
            document.querySelector(`.feature-item.${type}`).classList.add('active');
            
            // Zoom to relevant area
            const zoomAreas = {
                'route': [[20, 60], [40, -90]], 
                'disaster': [[18, 65], [38, -45]], 
                'eca': [[32, -60], [42, -48]],
                'collision': [[35, -54], [40, -50]], 
                'ship': [[34, -55], [40, -50]], 
                'cpa': [[35, -54], [40, -50]]
            };
            
            if (zoomAreas[type]) {
                map.fitBounds(zoomAreas[type]);
            }
        }
        
        // Get icon for explanation type
        function getIcon(type) {
            const icons = { 
                'route': 'route', 
                'disaster': 'exclamation-triangle', 
                'eca': 'leaf', 
                'collision': 'exclamation-circle', 
                'ship': 'ship', 
                'cpa': 'bell' 
            };
            return icons[type] || 'info-circle';
        }
        
        // Initialize with route explanation
        showExplanation('route');
        
        // Handle window resize
        window.addEventListener('resize', function() {
            map.invalidateSize();
        });
    </script>
</body>
</html>